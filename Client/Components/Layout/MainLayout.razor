@using Client.Services
@inherits LayoutComponentBase
@inject AuthService AuthService
@inject NavigationManager Navigation

<div class="main-layout">
    <nav>
        @if (AuthService.IsAuthenticated)
        {
            <span>Welcome, @AuthService.Username</span>
            <button @onclick="Logout">Logout</button>
        }
        else
        {
            <a href="/login">Login</a>
        }
    </nav>
    
    <div class="content px-4">
        @Body
    </div>
</div>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>

@code
{
    private void Logout()
    {
        AuthService.Logout();
        Navigation.NavigateTo("/");
    }
}
